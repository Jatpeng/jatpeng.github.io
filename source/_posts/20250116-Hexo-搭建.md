---
title: 20250116-Hexo 搭建
comments: true
copyright: true
date: 2025-01-16 18:16:10
tags:
categories:
description:
cover: https://picsum.photos/800/600?random=<%= titleHash('20250116-Hexo 搭建') %>
typora-root-url: ..
---

## 1.本地搭建 hexo 静态博客

-   安装 hexo 框架: 打开 cmd 运行

\$ `npm install -g hexo-cli`

-   新建一个文件夹，如 MyBlog ，进入该文件夹内，右击运行 git ，输入：

`$ hexo init`

-   生成完 hexo 模板，安装 npm ，运行：

`$ npm install`

没错，博客的主体部分到此已经完成了，来看看效果吧。运行：

`$ hexo server`

这时候打开浏览器，输入 localhost:4000 就可以看到博客目前的样子了。小小激动一下，然后按 Ctrl + C 就可以继续下面的操作了。 \## 2

## 2.hexo 主题选择

`$ git clone https://github.com/theme-next/hexo-theme-next themes/next`

打开根目录下的 \_config.yml，修改字段 theme 为: theme: next

## 3.hexo 与 github 分支

1.  创建一个source 分支，本地部署修改用.
2.  创建master 分支。用来存储静态的网站文件，这些文件都是通过hexo generate 生成的，不用手动去修改。要修改的话修改source 分支，然后hexo generate 生成新的静态文件，再deploy 到github 上。

## 4.新机器快速部署init.bat

***注意：机器的github 私密钥一致***

***注意：机器的github 私密钥一致***

***注意：机器的github 私密钥一致***

```         
@echo off
echo Starting project initialization...

:: 检查必要的程序是否安装
where git >nul 2>nul
if %errorlevel% neq 0 (
    echo Git is not installed! Please install Git first.
    pause
    exit /b 1
)

where node >nul 2>nul
if %errorlevel% neq 0 (
    echo Node.js is not installed! Please install Node.js first.
    pause
    exit /b 1
)

:: 克隆项目
echo Cloning the repository...
git clone git@github.com:Jatpeng/jatpeng.github.io.git blog
cd blog

:: 切换到 source 分支并拉取最新更新
echo Switching to source branch and pulling updates...
git checkout source
git pull origin source

:: 安装依赖
echo Installing dependencies...
call npm install

:: 安装主题相关依赖
echo Installing theme dependencies...
call npm install hexo-theme-next --save
call npm install hexo-deployer-git --save

:: 复制 push.bat（如果存在）
if exist push.bat (
    echo Copying deployment script...
    copy push.bat ..\push.bat
)

echo Project initialization completed!
echo You can now use 'hexo server' to start local development
echo Or use push.bat to deploy your changes
pause 
```

## 5.快速提交和push.bat

```         
@echo off
echo Starting Hexo deployment process...

:: 设置工作目录为脚本所在目录
cd /d "%~dp0"

:: 检查 Git 是否可用
where git >nul 2>nul
if %errorlevel% neq 0 (
    echo Git is not installed or not in PATH
    pause
    exit /b 1
)

:: 清理和生成
call hexo clean
call hexo generate

:: 添加所有更改
echo Adding changes to git...
git add .

:: 获取当前时间作为提交信息
set "datetime=%date:~0,4%%date:~5,2%%date:~8,2%_%time:~0,2%%time:~3,2%%time:~6,2%"
set "commit_msg=Update site %datetime%"

:: 提交更改
echo Committing changes...
git commit -m "%commit_msg%"

:: 确保在 source 分支
echo Checking out source branch...
git checkout source

:: 推送到远程仓库
echo Pushing to remote repository...
git push origin source

if %errorlevel% neq 0 (
    echo Error occurred during git operations
    pause
    exit /b 1
)

:: 部署到 GitHub Pages
echo Deploying to GitHub Pages...
call hexo deploy

echo Deployment completed successfully!
pause 
```

## 6.Hexo Typora 图片编辑

### 1.typora 图片设置

![image-20250121170816063](/images/20250116-Hexo-搭建/image-20250121170816063.png) \### 2.typora 设置图片的根目录

![image-20250121171707912](/images/20250116-Hexo-搭建/image-20250121171707912.png)

![image-20250121171812476](/images/20250116-Hexo-搭建/image-20250121171812476.png)

设置完后md 文件上会显示

![image-20250121171903337](/images/20250116-Hexo-搭建/image-20250121171903337.png)